{% extends 'shop/base.html' %}
{% load static %}

{% block title %}Breeze — Главная{% endblock %}

{% block content %}
    <main class="content">
        <section class="section container">
            <div class="section__body">
                <div class="showcase">
                    <div class="showcase__inner">
                        <div class="showcase__body">
                            <h1 class="showcase__title">
                                Мастерская парфюмерии<br>
                                breeze
                            </h1>
                            <div class="showcase__description">
                                <p>Мы создаем уникальную крафтовую парфюмерию из натуральных ингредиентов, вдохновленную природой и свежестью.</p>
                            </div>
                        </div>
                        <img 
                            src="{% static 'images/header-image.png' %}" 
                            alt="" 
                            class="showcase__image none"
                            width="900" height="700" loading="lazy"
                        >
                    </div>
                </div>
            </div>
        </section>

        <section class="section container">
            <header class="section__header header-left">
                <h2 class="section__title h2">Наша продукция</h2>
            </header>
            <div class="section__body">
                <div class="products">
                    <div class="products__inner">
                        <ul class="products__list">
                            <li class="products__item">
                                <a class="products-card" href="{% url 'shop:catalog' %}">
                                    <img 
                                        src="{% static 'images/showcase_1.jpg' %}" 
                                        alt="Моно-ароматы" 
                                        class="products-card__image"
                                        width="250" height="380" loading="lazy"
                                    >
                                    <h4 class="products-card__title">Моно-ароматы</h4>
                                </a>
                            </li>
                            <li class="products__item">
                                <a class="products-card" href="{% url 'shop:catalog' %}">
                                    <img 
                                        src="{% static 'images/showcase_2.jpg' %}" 
                                        alt="Авторские композиции" 
                                        class="products-card__image"
                                        width="250" height="380" loading="lazy"
                                    >
                                    <h4 class="products-card__title">Авторские композиции</h4>
                                </a>
                            </li>
                            <li class="products__item">
                                <a class="products-card" href="{% url 'shop:catalog' %}">
                                    <img 
                                        src="{% static 'images/showcase_3.jpg' %}" 
                                        alt="Популярные композиции" 
                                        class="products-card__image"
                                        width="250" height="380" loading="lazy"
                                    >
                                    <h4 class="products-card__title">Популярные композиции</h4>
                                </a>
                            </li>
                        </ul>
                    </div> 
                </div>
            </div>
        </section>

        <section class="section container">
           <header class="section__header-blue">
                <h2 class="section__title h2">Новости</h2>
            </header>
            <div class="section__body">
                <div class="news">
                    <div class="news__slider">
                        <ul class="news__list--index">
                            {% for n in latest_news %}
                                <li class="news__item--index">
                                    <article class="news-card">
                                        {# изображение: если объект — Django model с ImageField #}
                                        {% if n.image and n.image.url %}
                                        <div class="news-card__image-wrapper--index">
                                            <img src="{{ n.image.url }}" alt="{{ n.title }}" class="news-card__image" width="500" height="400" loading="lazy">
                                        </div>
                                        {% elif n.image %}
                                            {# n.image может быть строкой-путём из json: используем static #}
                                            <img src="{% static n.image %}" alt="{{ n.title }}" class="news-card__image" width="500" height="400" loading="lazy">
                                        {% else %}
                                            <img src="{% static 'images/news_1.jpg' %}" alt="{{ n.title }}" class="news-card__image" width="500" height="400" loading="lazy">
                                        {% endif %}

                                        <div class="news-card__body">
                                            <h3 class="news-card__title">{{ n.title }}</h3>

                                            <div class="news-card__date">
                                                <p><time datetime="{% if n.published_at %}{{ n.published_at|date:'Y-m-d' }}{% elif n.published_at %}{{ n.published_at }}{% endif %}">
                                                    {% if n.published_at %}{{ n.published_at|date:"d.m.Y" }}{% elif n.published_at %}{{ n.published_at }}{% else %}—{% endif %}
                                                </time></p>
                                            </div>

                                            <div class="news-card__description">
                                                <p>
                                                    {% if n.content %}
                                                        {{ n.content|truncatechars:120 }}
                                                    {% else %}
                                                        Краткое описание отсутствует.
                                                    {% endif %}
                                                </p>
                                            </div>
                                                <a href="{% url 'shop:news_detail' n.id %}" class="news-card__link">Читать далее</a>
                                                <span class="visually-hidden">Увидеть новость полностью</span>
                                            </a>
                                        </div>
                                    </article>
                                </li>
                            {% empty %}
                                <li class="news__item">Новостей пока нет.</li>
                            {% endfor %}
                        </ul>
                    </div>    
                </div>
            </div>
        </section>
    </main>
{% endblock %}